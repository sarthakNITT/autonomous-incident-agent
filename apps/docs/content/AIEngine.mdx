# AI Engine

The AI Engine is the "brain" of AIA available at `apps/agent`. It uses Large Language Models (LLMs) to reason about code and failure states.

## Capabilities

### 1. Root Cause Analysis (RCA)

The engine analyzes stack traces and source code to determine *why* an error occurred. It doesn't just look at the line number; it reads the surrounding context (AST) to understand the logic flow.

### 2. Test Generation

Before fixing a bug, the engine writes a reproduction script (`repro.ts`). This ensures that the bug is observable and that the fix is valid.

### 3. AST-Aware Patching

AIA uses Abstract Syntax Trees (AST) to modify code. Instead of "replace line 10", it says "replace the `FunctionDeclaration` named `getUser`". This makes patches robust against stale file versions.

## Configuration

The engine is configured in `aia.config.ts`:

```typescript
ai: {
  provider: "you.com", // or "mock"
  model: "research-pro",
  maxIterations: 5
}
```

*   **`provider`**: The backend LLM service.
*   **`maxIterations`**: How many times the agent will retry a fix if the reproduction script fails.
