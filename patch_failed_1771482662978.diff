--- a/unknown
+++ b/unknown
@@ -1,10 +1,14 @@
 
-function errorHandler(err, req, res, next) {
-  // Possibly missing error handling logic leading to HTTP 500
-  throw new Error('error.handler');
-}
+function errorHandler(err, req, res, next) {
+  if (res.headersSent) {
+    return next(err);
+  }
+  console.error('Error caught by errorHandler:', err);
+  res.status(500).json({ error: 'Internal Server Error' });
+}
 
-// Usage example:
-app.use(errorHandler);
+// Usage example:
+app.use(errorHandler);